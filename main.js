(()=>{"use strict";const t={add:(t,n)=>t+n,sub:(t,n)=>t-n,mul:(t,n)=>t*n,div:(t,n)=>t/n,power:(t,n)=>Math.pow(t,n),sqrt:t=>Math.sqrt(t)};function n(t){let n="";return n=-1==t.indexOf(".")?t.length:t.split(".")[0].length,n>9?Number(t).toExponential().toString():t}const e=document.getElementById("history-button"),o=document.getElementById("history-list"),u=document.querySelectorAll(".number-button"),r=document.querySelectorAll(".operator-button"),i=document.querySelector(".allclear-button"),m=document.querySelector(".clear-button"),a=document.querySelector(".back-button"),s=document.querySelector(".decimal-button"),c=document.querySelector(".equal-button"),l=document.getElementById("main-operation"),d=document.getElementById("main-answer"),x={num1:"",operation:"",num2:"",ans:""};e.addEventListener("click",(()=>{o.classList.toggle("history-list-closed"),o.classList.toggle("history-list-open")})),u.forEach((t=>{t.addEventListener("click",(()=>{const n=t.textContent;if(x.ans)return x.num1="",x.operation="",x.num2="",x.ans="",l.textContent="",void(d.textContent="");x.operation?(x.num2+=n,l.textContent+=n):(x.num1+=n,l.textContent+=n)}))})),s.addEventListener("click",(()=>{if(x.ans&&-1==x.ans.indexOf("."))return x.num1=`${x.ans}.`,x.operation="",x.num2="",x.ans="",l.textContent=x.num1,void(d.textContent="");if(!x.ans)if(x.operation){if(x.num2||(x.num2+="0",l.textContent+="0"),-1!=x.num2.indexOf("."))return;x.num2+=".",l.textContent+="."}else{if(-1!=x.num1.indexOf("."))return;x.num1||(x.num1+="0",l.textContent+="0"),x.num1+=".",l.textContent+="."}})),r.forEach((e=>{e.addEventListener("click",(()=>{const o=e.dataset.operator,u=e.textContent;if(x.num1){if(x.ans&&"sqrt"!=o)return x.num1=x.ans,x.operation=o,x.num2="",x.ans="",l.textContent=`${x.num1} ${u} `,void(d.textContent="");if(!x.operation||!x.num2||"sqrt"==o){if("sqrt"===o){if(x.ans){x.num1=x.ans,x.operation=o,x.num2="1";const e=n(t[x.operation](Number(x.num1),Number(x.num2)).toString());return x.ans=e,l.textContent=`${u} ${x.num1}`,void(d.textContent=e)}{x.operation=o,x.num2="1";const e=n(t[x.operation](Number(x.num1),Number(x.num2)).toString());return x.ans=e,l.textContent=`${u} ${x.num1}`,void(d.textContent=e)}}x.operation?(x.operation=o,l.textContent=l.textContent.slice(0,-3),l.textContent+=` ${u} `):(x.operation=o,l.textContent+=` ${u} `)}}}))})),i.addEventListener("click",(()=>{x.num1="",x.operation="",x.num2="",x.ans="",l.textContent="",d.textContent=""})),m.addEventListener("click",(()=>{if(x.ans)return x.num1="",x.operation="",x.num2="",x.ans="",l.textContent="",void(d.textContent="");if(!x.operation||x.operation&&!x.num2)x.num1="",x.operation="",l.textContent="";else{const t=x.num2.length;x.num2="",x.operation?l.textContent=l.textContent.slice(0,-t):l.textContent=x.num1}})),a.addEventListener("click",(()=>x.ans?(x.num1=x.ans.slice(0,-1),x.operation="",x.num2="",x.ans="",l.textContent=x.num1,void(d.textContent="")):x.operation&&!x.num2?(x.operation="",void(l.textContent=x.num1)):void(x.operation?(x.num2=x.num2.slice(0,-1),l.textContent=l.textContent.slice(0,-1)):(x.num1=x.num1.slice(0,-1),l.textContent=l.textContent.slice(0,-1))))),c.addEventListener("click",(()=>{if(!x.num1||!x.operation||!x.num2)return;const e=n(t[x.operation](Number(x.num1),Number(x.num2)).toString());x.ans=e,l.textContent+="  =",d.textContent=e}))})();